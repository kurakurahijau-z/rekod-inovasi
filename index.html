<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Rekod Inovasi Jabatan</title>
  <script src="config.js"></script>
  <script src="app.js"></script>
</head>
<body style="font-family:Arial; padding:40px">

<h2>Rekod Inovasi Jabatan</h2>
<p>Login guna akaun rasmi @pms.edu.my</p>

<button onclick="login()">Login Google</button>

<script>
async function login() {
  const email = prompt("Masukkan email @pms.edu.my");

  if (!email || !email.endsWith(window.APP_CONFIG.ALLOWED_DOMAIN)) {
    alert("Domain tak sah.");
    return;
  }

  const r = await apiGet({ action: "login", email });

  if (!r.ok) {
    alert("Login gagal");
    return;
  }

  setSession(email, r.token);
  location.href = "./dashboard.html";
}
</script>

</body>
</html>
